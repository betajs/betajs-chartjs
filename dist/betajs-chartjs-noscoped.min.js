/*!
betajs-chartjs - v1.0.8 - 2017-07-17
Copyright (c) Pablo Iglesias
Apache-2.0 Software License.
*/
(function(){var a=this.subScope();a.binding("module","global:BetaJS.Dynamics.ChartJS"),a.binding("base","global:BetaJS"),a.binding("dynamics","global:BetaJS.Dynamics"),a.binding("jquery","global:jQuery"),a.define("module:",function(){return{guid:"3f11db99-8d84-486b-845c-ce2280ed4446",version:"1.0.8"}}),a.assumeVersion("base:version","~1.0.96"),a.assumeVersion("dynamics:version","~0.0.83"),a.define("module:ChartJS.Bars",["module:ChartJS","base:Strings"],function(a,b,c){var d=a.extend({scoped:c},{attrs:{horizontal:!1},create:function(){var a="bar";this.get("horizontal")&&(a="horizontalBar"),this._init(a);var b=new Chart(this.getCanvas(),this.get("chartobj"));this.set("chart",b)},_getColors:function(){if(this.get("randomcolors")){var a=this.get("chartdata")[0].data.length,b=this.__getRandomColors(a),c=[],d=[];return b.forEach(function(a,b){var e="rgba("+a[0]+", "+a[1]+", "+a[2]+", 0.2)",f="rgba("+a[0]+", "+a[1]+", "+a[2]+", 1)";c.push(e),d.push(f)}),{backgroundColors:c,lineColors:d}}},_addRandomColors:function(a){var b=this._getColors();return a.backgroundColor||(a.backgroundColor=b.backgroundColors),a.borderColor||(a.borderColor=b.lineColors,a.borderWidth=1),a}});return d.register("ba-chart-bars"),d}),a.define("module:ChartJS",["dynamics:Dynamic","base:Strings"],function(a,b,c){return a.extend({scoped:c},{template:"<div><canvas></canvas></div>",attrs:{type:"",title:!1,legend:!0,colors:[],chartdata:null,chartlabels:null,customdataobj:null,options:null,chartobj:null,colorset:null,chart:null},events:{"change:chartdata":function(a,b){if(b){this.__validateDataSets(),this.setProp("chartobj.data.datasets",this.get("chartdata")),this.setProp("chartobj.data.labels",this.get("chartlabels"));var c=this.get("chart");c.update()}}},getCanvas:function(){return this.activeElement().getElementsByTagName("CANVAS")[0]},_init:function(a){if(this.get("title")&&this.__addTitle(this.get("title")),this.get("legend")!==!0&&this.__addLegend(this.get("legend")),this.get("customdataobj")){var b=this.get("customdataobj");return b.options&&this.get("options")&&(b.options=Object.assign(this.get("options"),b.options)),this.set("chartobj",b),!0}this.__validateData(),this.set("chartobj",{}),void 0!==a&&this.setProp("chartobj.type",a);var c={labels:this.get("chartlabels"),datasets:this.get("chartdata")};this.setProp("chartobj.options",this.get("options")),this.setProp("chartobj.data",c)},__validateData:function(){if(!this.get("chartdata"))throw"Chart chartdata must be set";this.get("chartdata");this.get("chartlabels")||console.warn("You might be missing the data labels"),this.__validateDataSets()},__validateDataSets:function(){var a=this.get("chartdata"),b=this;a.forEach(function(a,c,d){a.label||console.warn("A dataset doesn't have a label"),!b.get("chartlabels")||a.data&&a.data.length===b.get("chartlabels").length||console.warn("The amount of data points doesn't match chart labels"),b.get("randomcolors")&&(d[c]=b._addRandomColors(a))})},__addTitle:function(a){var b="";b="object"!=typeof a?{display:!0,text:a}:a,this.__addOption("title",b)},__addLegend:function(a){var b="";"object"==typeof a?b=a:a||(b={display:!1}),this.__addOption("legend",b)},__addOption:function(a,b){this.get("options")||this.set("options",{}),this.setProp("options."+a,b)},__getRandomColors:function(a){for(var b=[],c=1;c<=a;c++){var d=[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())];b.push(d)}return b}})}),a.define("module:ChartJS.Doughnut",["module:ChartJS","base:Strings"],function(a,b,c){var d=a.extend({scoped:c},{initial:{create:function(){this._init("doughnut"),new Chart(this.getCanvas(),this.get("chartobj"))}},_getColors:function(){if(this.get("randomcolors")){var a=this.get("chartdata")[0].data.length,b=this.__getRandomColors(a),c=[],d=[];return b.forEach(function(a,b){var d="rgba("+a[0]+", "+a[1]+", "+a[2]+", 0.2)";c.push(d)}),{backgroundColors:c,lineColors:d}}},_addRandomColors:function(a){var b=this._getColors();return a.backgroundColor||(a.backgroundColor=b.backgroundColors),a}});return d.register("ba-chart-doughnut"),d}),a.define("module:ChartJS.Line",["module:ChartJS","base:Strings"],function(a,b,c){var d=a.extend({scoped:c},{create:function(){this._init("line");var a=new Chart(this.getCanvas(),this.get("chartobj"));this.set("chart",a)},_getColors:function(){if(this.get("randomcolors")){var a,b,c=1,d=this.__getRandomColors(c);return d.forEach(function(c,d){var e="rgba("+c[0]+", "+c[1]+", "+c[2]+", 0.2)",f="rgba("+c[0]+", "+c[1]+", "+c[2]+", 1)";a=e,b=f}),{backgroundColors:a,lineColors:b}}},_addRandomColors:function(a){var b=this._getColors();return a.backgroundColor||(a.backgroundColor=b.backgroundColors),a.borderColor||(a.borderColor=b.lineColors,a.borderWidth=1),a.pointBackgroundColor=b.backgroundColors,a.pointBorderColor="#fff",a.pointHoverBackgroundColor="#fff",a.pointHoverBorderColor=b.backgroundColors,a}});return d.register("ba-chart-line"),d}),a.define("module:ChartJS.Pie",["module:ChartJS","base:Strings"],function(a,b,c){var d=a.extend({scoped:c},{create:function(){this._init("pie");var a=new Chart(this.getCanvas(),this.get("chartobj"));this.set("chart",a)},_getColors:function(){if(this.get("randomcolors")){var a=this.get("chartdata")[0].data.length,b=this.__getRandomColors(a),c=[],d=[];return b.forEach(function(a,b){var d="rgba("+a[0]+", "+a[1]+", "+a[2]+", 0.2)";c.push(d)}),{backgroundColors:c,lineColors:d}}},_addRandomColors:function(a){var b=this._getColors();return a.backgroundColor||(a.backgroundColor=b.backgroundColors),a}});return d.register("ba-chart-pie"),d}),a.define("module:ChartJS.Polar",["module:ChartJS","base:Strings"],function(a,b,c){var d=a.extend({scoped:c},{initial:{create:function(){this._init("polarArea"),new Chart(this.getCanvas(),this.get("chartobj"))}},_getColors:function(){if(this.get("randomcolors")){var a=this.get("chartdata")[0].data.length,b=this.__getRandomColors(a),c=[],d=[];return b.forEach(function(a,b){var d="rgba("+a[0]+", "+a[1]+", "+a[2]+", 0.2)";c.push(d)}),{backgroundColors:c,lineColors:d}}},_addRandomColors:function(a){var b=this._getColors();return a.backgroundColor||(a.backgroundColor=b.backgroundColors),a}});return d.register("ba-chart-polar"),d}),a.define("module:ChartJS.Radar",["module:ChartJS","base:Strings"],function(a,b,c){var d=a.extend({scoped:c},{initial:{create:function(){this._init("radar"),new Chart(this.getCanvas(),this.get("chartobj"))}},_getColors:function(){if(this.get("randomcolors")){var a,b,c=1,d=this.__getRandomColors(c);return d.forEach(function(c,d){var e="rgba("+c[0]+", "+c[1]+", "+c[2]+", 0.2)",f="rgba("+c[0]+", "+c[1]+", "+c[2]+", 1)";a=e,b=f}),{backgroundColors:a,lineColors:b}}},_addRandomColors:function(a){var b=this._getColors();return a.backgroundColor||(a.backgroundColor=b.backgroundColors),a.borderColor||(a.borderColor=b.lineColors,a.borderWidth=1),a.pointBackgroundColor=b.backgroundColors,a.pointBorderColor="#fff",a.pointHoverBackgroundColor="#fff",a.pointHoverBorderColor=b.backgroundColors,a}});return d.register("ba-chart-radar"),d})}).call(Scoped);